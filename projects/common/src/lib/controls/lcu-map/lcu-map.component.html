<div class="icon-list">
  <div>
    <div class="top-icon-set">
      <mat-icon class="hamburger-icon">menu</mat-icon>
      <mat-icon class="chevron-icon">chevron_left</mat-icon>
    </div>
    <div class="bottom-icon-set" fxLayoutAlign.lt-sm="flex-start" fxLayoutAlign="space-around">
      <mat-icon (click)="ShowLocationSearchBarClicked()">search</mat-icon>
      <mat-icon (click)="ActivateSaveMapDialog(map)">add</mat-icon>
      <mat-icon mat-button [matMenuTriggerFor]="layerMenu">layers</mat-icon>
    </div>
  </div>
</div>

<div [hidden]="!ShowSearchBar" id="search-bar">
  <input placeholder="search for location" autocorrect="off" autocapitalize="off" spellcheck="off" type="text" #search [formControl]="SearchControl">
</div>
<agm-map (mapReady)="OnMapReady($event)" [mapTypeId]="CurrentMapViewType" (boundsChange)="BoundsChange($event)" #map
  [latitude]="_currentMapModel.origin.lat" [longitude]="_currentMapModel.origin.lng" [title]="_currentMapModel.title"
  [zoom]="_currentMapModel.zoom" (mapDblClick)="OnMapDoubleClicked($event)" (mapClick)="OnChoseLocation($event)"
  [usePanning]="true">
  <div *ngFor="let marker of _currentMapModel.locationList">
    <div *ngFor="let marker of CurrentlyActiveLocations">
      <agm-marker [latitude]="marker.lat" [longitude]="marker.lng" [title]="marker.title"
        [iconUrl]="marker.iconImageObject" (markerClick)="DisplayMarkerInfo(marker)">
      </agm-marker>
    </div>
  </div>
</agm-map>

<!-- the menu for the map layers button -->
<mat-menu #layerMenu="matMenu" id="layer-menu">
  <mat-radio-group [(ngModel)]="CurrentMapViewType">
    <mat-radio-button (click)="$event.stopPropagation()" *ngFor="let view of MapViewTypes" [value]="view.value">
      {{view.display}}</mat-radio-button>
  </mat-radio-group>
  <mat-divider></mat-divider>
  <mat-checkbox (click)="$event.stopPropagation();LayerClicked()" [(ngModel)]="PrimaryMarkersSelected"
    matTooltip="The markers on your main map... Add markers to this map to be saved." matTooltipPosition="before">
    {{_currentMapModel.title}} (Primary)</mat-checkbox>
  <mat-divider></mat-divider>
  <mat-checkbox (click)="$event.stopPropagation();LayerClicked(map)" *ngFor="let map of SecondaryMaps">{{ map.title }}
  </mat-checkbox>
</mat-menu>