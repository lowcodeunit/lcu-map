<!-- Modal -->
<div id="dialogRef" fxLayout="column" [ngClass]="{'basic-info-window': ModalState !== 'moreInfo'}">
  <div fxLayout="row" fxLayoutAlign="space-between start">
    <!-- if both website and title exist then the title is the link to the website -->
    <!-- <mat-card-title *ngIf="BasicInfoData?.Title && BasicInfoData?.Website" fxLayout="row" fxLayoutAlign="start">
      <a *ngIf="BasicInfoData?.Website" class="link" href={{BasicInfoData.Website}} target="_blank" style="margin-right: 2em">{{BasicInfoData.Title}}</a>
    </mat-card-title> -->

    <!-- The title fxLayoutAlign="space-between start"-->
    <div class="basic-info-title" *ngIf="BasicInfoData?.Title && TitleEllipsis === true && ModalState !== 'addToMap'" fxLayout="row"
      fxLayoutAlign="start center" style="margin-bottom: 1em; font-size: 20px" matTooltip={{BasicInfoData?.Title}}>
      {{Title}}
  </div>
    <div class="basic-info-title" *ngIf="BasicInfoData?.Title && TitleEllipsis === false && ModalState !== 'addToMap'" fxLayout="row"
      fxLayoutAlign="start center" style="margin-bottom: 1em; font-size: 20px" matTooltip={{BasicInfoData?.Title}>
      {{Title}}
  </div>
    <!-- close button -->
    <mat-icon fxFlex fxLayoutAlign="end start" (click)="Close()" matTooltip="Close" matTooltipPosition="right">close
    </mat-icon>
  </div>

  <div class="rating-container" fxFlex fxLayoutAlign="center center">
    <a class="link" mat-icon-button>
      <mat-icon matTooltip="Up" class="positive-rating" [ngClass]="{'selected-positive': Rating === 'positive'}" (click)="SelectRating('positive');">
        thumb_up
      </mat-icon>
    </a>
    <a class="link" mat-icon-button>
      <mat-icon matTooltip="Down" class="negative-rating" [ngClass]="{'selected-negative': Rating === 'negative'}" (click)="SelectRating('negative');">
        thumb_down
      </mat-icon>
    </a>
  </div>

  <!-- content with scroll bar  -->
  <mat-dialog-content class="mat-dialog-content">
    <!-- display basic data -->
    <div *ngIf="ModalState === 'basic'" class="basic-info" fxLayout="column" fxLayoutAlign="start start"
      class="marker-info-container">
      <p *ngIf="Type" style="margin:0; color:grey">{{Type}}</p>

      <div *ngIf="BasicInfoData?.Address">{{BasicInfoData?.Address}}</div>
      <div *ngIf="BasicInfoData?.Town || BasicInfoData?.State">
        {{BasicInfoData?.Town}}, {{BasicInfoData?.State}}
      </div>
      <div *ngIf="BasicInfoData?.Country ">{{BasicInfoData?.Country}}</div>
      <div *ngIf="BasicInfoData?.Telephone">{{BasicInfoData?.Telephone}}</div>

      <!-- </div> -->
    </div>

    <!-- form data add to map -->
    <div *ngIf="ModalState === 'addToMap'">
      <form fxLayout="column" fxLayoutAlign="center center" [formGroup]="NewMarkerForm" fxLayoutGap="30px">
        <mat-form-field>
          <mat-label>Marker Title</mat-label>
          <input type="text" matInput formControlName="title">
          <mat-hint>The title for the map marker</mat-hint>
          <mat-error>Invalid or missing title</mat-error>
        </mat-form-field>
        <!-- <mat-form-field>
          <mat-label>Icon</mat-label>
          <mat-select formControlName="icon">
            <mat-option *ngFor="let icon of MarkerSet" [value]="icon">{{icon.Icon}}</mat-option>
          </mat-select>
        </mat-form-field> -->
        <!-- <div style="width: 100%"> -->
        <div fxLayout="row wrap">
          <div [fxFlex]="25" *ngFor="let icon of DisplayMarkerSet" class="available-image-container">
            <img class="available-images" [ngClass]="{'chosen-icon': icon === ChosenIcon}" src="{{icon.IconUrl}}"
              (click)="SetIcon(icon)" />
          </div>
          <div *ngIf="!IconSetExpanded" class="available-image-container" [fxFlex]="25">
            <button mat-button color="primary" color="default" (click)="ToggleVisibleIcons()"
              class="icon-expansion-buttons" matTooltip="Click to expand list of icons">...</button>
          </div>
          <div *ngIf="IconSetExpanded" class="available-image-container" [fxFlex]="25">
            <button mat-button color="primary" color="default" (click)="ToggleVisibleIcons()"
              class="icon-expansion-buttons" matTooltip="Click to contract list of icons">...</button>
          </div>
        </div>
        <!-- </div> -->
        <!-- <mat-form-field>
            <mat-label>Notes</mat-label>
            <input type="text" matInput formControlName="notes">
            <mat-hint>Add Notes for this location</mat-hint>
          </mat-form-field> -->
      </form>
    </div>

    <!-- More Info expansion panel -->

    <div class="more-info-container" *ngIf="ModalState === 'moreInfo'" fxLayout="column" fxLayoutAlign="start start">
      <!-- <h2 *ngIf="BasicInfoData?.Title">{{BasicInfoData.Title}}</h2> -->


      <!-- <a *ngIf="BasicInfoData?.Reservations" href={{BasicInfoData?.Reservations}} class="button">Reservations</a>
      <a *ngIf="BasicInfoData?.menu" href={{BasicInfoData?.menu}} class="button">Menu</a> -->
      <!-- </div> -->
      <mat-tab-group mat-stretch-tabs>
        <mat-tab label="General">

          <p style="margin-top: 1.5em; margin-bottom: 1.5em">Voting Blah Blah Blah</p>

          <div class="customHr">.</div>

          <div *ngIf="BasicInfoData?.Address" style="margin-top: 0.5em;">{{BasicInfoData?.Address}}</div>
          <div *ngIf="BasicInfoData?.Town || BasicInfoData?.Country || BasicInfoData?.State">
            {{BasicInfoData?.Town}}, {{BasicInfoData?.State}}
            {{BasicInfoData?.Country}}</div>
          <div *ngIf="LinkedPhoneNumber" class="link" style="margin-bottom: 0.5em;">{{BasicInfoData?.Telephone}}</div>

          <div class="links" fxLayout="row" fxLayoutAlign="space-between center" style="margin-top: 1.5em">
            <!-- <a *ngIf="LinkedPhoneNumber" class="link" href={{LinkedPhoneNumber}} mat-icon-button>
                    <mat-icon title="Call {{LinkedPhoneNumber}}">call</mat-icon>
                  </a> -->

            <a *ngIf="BasicInfoData?.Website" class="link" href={{BasicInfoData?.Website}} target="_blank"
              mat-icon-button>
              <mat-icon title="Website" style="font-size: 35px">public</mat-icon>
            </a>


            <a class="link" *ngIf="InstagramUrl" href={{InstagramUrl}} target="_blank" mat-icon-button>
              <mat-icon title="Instagram" svgIcon="instagram"></mat-icon>
            </a>

            <!-- <a *ngIf="BasicInfoData?.menu" class="link" href={{BasicInfoData?.menu}} target="_blank" mat-icon-button>
                    <mat-icon title="Menu">restaurant_menu</mat-icon>
                  </a> -->

            <!-- NO FUNCTIONALITY -->
            <a *ngIf="BasicInfoData?.Reservations" href={{BasicInfoData?.Reservations}} target="_blank" mat-icon-button>
              <mat-icon title="Reservations" style="font-size: 33px">book_mark</mat-icon>
            </a>

            <!-- NO FUNCTIONALITY -->
            <a *ngIf="BasicInfoData?.Directions" class="link" target="_blank" mat-icon-button>
              <mat-icon title="Directions" style="font-size: 33px">directions</mat-icon>
            </a>

          </div>

        </mat-tab>


        <mat-tab label="Content">
          <p style="margin-top: 0.5em; margin-bottom:0em; color:grey">Notes</p>
          <p *ngIf="BasicInfoData?.Notes" style="margin-top: 0em; margin-bottom: 0em">{{BasicInfoData?.Notes}}</p>

          <p style="margin-top: 1.5em; margin-bottom:0em; color:grey">Photos</p>
          <div *ngIf="BasicInfoData?.Photos" class="info-photo-container" style="margin-bottom: 0.5em;">

            <img *ngFor="let photo of BasicInfoData?.Photos" src="{{photo}}" style="width: 6.5em" />
          </div>

          <p style="margin-top: 1.5em; margin-bottom:0em; color:grey">Links</p>

        </mat-tab>


        <mat-tab label="Travel">
          <p style="margin-top: 1.5em">Country: USA</p>
        </mat-tab>
      </mat-tab-group>





      <!-- <a *ngIf="BasicInfoData?.Website" href={{BasicInfoData?.Website}}>Website</a> -->


      <!-- refrence to angular star rating repo https://github.com/BioPhoton/angular-star-rating/wiki/Property-bindings -->
      <!-- <p *ngIf="BasicInfoData?.Awards" style="margin-top: 0.5em; margin-bottom: 0em; color:grey">Awards</p>
      <div *ngIf="BasicInfoData?.Awards">{{BasicInfoData?.Awards}}</div>
      <a *ngIf="BasicInfoData?.Media" href={{BasicInfoData?.Media}}>Media</a>
      <p *ngIf="BasicInfoData?.GeneralInfo" style="margin-top: 0.75em; margin-bottom:0em; color:grey">General Info</p>
      <p *ngIf="BasicInfoData?.GeneralInfo" style="margin-top: 0em">{{BasicInfoData?.GeneralInfo}}</p>
      <div class="customHr">.</div> -->


    </div>
  </mat-dialog-content>

  <!-- Buttons -->

  <mat-dialog-actions class="mat-dialog-actions" fxLayout="row" fxLayoutAlign="space-between end">
    <button *ngIf="ModalState === 'addToMap'" mat-button mat-raised-button [mat-dialog-close]="NewMarker"
      (click)="SetMarkerData()" [disabled]="NewMarkerForm.invalid">Save</button>

    <!-- <button *ngIf="ModalState === 'addToMap'" mat-button mat-raised-button
      (click)="ModalState = 'basic';changePositionToCenter(false)">
      Less info</button> -->

    <button *ngIf="ModalState != 'moreInfo'" mat-button mat-raised-button
      (click)=" ModalState = 'moreInfo'; changePositionToRHS()">More
      info</button>

    <button *ngIf="ModalState !== 'addToMap' && !IsEdit && ModalState === 'basic'" mat-button mat-raised-button
      (click)="ModalState = 'addToMap';changePositionTopOfCenter()">+</button>

    <button *ngIf="ModalState !== 'addToMap' && IsEdit && ModalState === 'basic'" mat-button mat-raised-button
      (click)="ModalState = 'addToMap'; changePositionTopOfCenter()">Edit</button>

  </mat-dialog-actions>
</div>
